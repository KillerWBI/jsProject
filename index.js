import"./assets/styles-BTCk1MES.js";import{a as u,i as m}from"./assets/vendor-BLO6kU33.js";const p="https://dummyjson.com/products";async function d(t=1){try{return(await u.get(p,{params:{limit:12,skip:(t-1)*12}})).data}catch(e){return m.error({title:"error",message:`Помилка при завантаженні зображень:, ${e.message}`,timeout:3e3,position:"topRight"}),null}}async function $(t){try{return(await u.get(p+`/${t}`)).data}catch(e){return m.error({title:"error",message:`Помилка при завантаженні зображень:, ${e.message}`,timeout:3e3,position:"topRight"}),null}}async function q(t,e=1){try{return(await u.get(p+"/search",{params:{q:t,limit:12,skip:(e-1)*12}})).data}catch(o){return m.error({title:"error",message:`Помилка при завантаженні зображень:, ${o.message}`,timeout:3e3,position:"topRight"}),null}}async function S(){try{return(await u.get(p+"/category-list")).data}catch(t){return m.error({title:"error",message:`Помилка при завантаженні зображень:, ${t.message}`,timeout:3e3,position:"topRight"}),null}}async function C(t,e=1){try{return(await u.get(p+`/category/${t}`,{params:{limit:12,skip:(e-1)*12}})).data}catch(o){return m.error({title:"error",message:`Помилка при завантаженні зображень:, ${o.message}`,timeout:3e3,position:"topRight"}),null}}function w(t,e){const o=document.querySelector(".load-more-btn");if(!o||!e||typeof e.total!="number")return;const c=t*12,r=e.total,n=c<r;n&&o.classList.contains("is-hidden")?o.classList.remove("is-hidden"):!n&&!o.classList.contains("is-hidden")&&o.classList.add("is-hidden")}function a(t,e=d(t)){const o=document.querySelector(".products");e.then(c=>{c&&c.products&&(c.products.forEach(r=>{const n=document.createElement("li");n.classList.add("products__item"),n.dataset.id=r.id,n.innerHTML=`
    <img class="products__image" src="${r.images[0]}" alt=""/>
    <p class="products__title">${r.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${r.brand}</span></p>
    <p class="products__category">Category:${r.category} </p>
    <p class="products__price">Price:${r.price} $</p>
        `,o.appendChild(n)}),w(t,c))})}function v(t=S()){const e=document.querySelector(".categories");e&&t.then(o=>o.forEach(c=>{const r=document.createElement("li");r.classList.add("categories__item"),r.innerHTML=`<button class="categories__btn" type="button">${c}</button>`,e.appendChild(r)}))}function _(){document.querySelectorAll(".categories__btn--active").forEach(t=>{t.classList.remove("categories__btn--active")})}function x(t){const e=document.querySelector(".modal-product");e&&(e.innerHTML=`
    <div class="modal-product" data-id="${t.id}">
      <img class="modal-product__image" src="${t.images[0]}" alt="${t.title}" />
      <h2 class="modal-product__title">${t.title}</h2>
      <p class="modal-product__brand">Brand: ${t.brand}</p>
      <p class="modal-product__category">Category: ${t.category}</p>
      <p class="modal-product__price">Price: ${t.price} $</p>
      <p class="modal-product__description">${t.description}</p>
    </div>
  `)}function h(t,e){const o=JSON.parse(localStorage.getItem(t))||[],c=document.querySelector(`[data-${t}-count]`);o.includes(e)||(o.push(e),localStorage.setItem(t,JSON.stringify(o)),c.textContent=o.length)}function f(t){const e=JSON.parse(localStorage.getItem(t))||[],o=document.querySelector(`[data-${t}-count]`);o&&(o.textContent=e.length)}function y(t,e){const o=JSON.parse(localStorage.getItem(t))||[],c=document.querySelector(`[data-${t}-count]`),r=o.filter(n=>n!==e);localStorage.setItem(t,JSON.stringify(r)),c.textContent-=1}function g(t){return JSON.parse(localStorage.getItem(t))||[]}function L(t,e){return(JSON.parse(localStorage.getItem(t))||[]).includes(e)}let s=1;const E=document.querySelector(".load-more-btn"),I=document.querySelector(".categories");let l=null;const R=document.querySelector(".search-form"),A=document.querySelector(".search-form__btn-clear"),b=document.querySelector(".modal");document.querySelector(".modal-product__btn");const B=document.querySelector(".modal-product__actions"),M=document.querySelector(".products"),P=document.querySelector(".modal__close-btn");let i="";addEventListener("DOMContentLoaded",()=>{a(s,d(s)),v(S()),f("wishlist"),f("cart")});E.addEventListener("click",()=>{s++,l===null?a(s,d(s)):a(s,C(l,s))});I.addEventListener("click",t=>{if(_(),t.target.classList.contains("categories__btn")){const e=t.target.textContent;l=e,s=1;const o=document.querySelector(".products");if(o.innerHTML="",t.target.classList.contains("categories__btn--active")){t.target.classList.remove("categories__btn--active"),l=null,a(s,d(s));return}t.target.textContent==="ALL"&&(l=null,a(s,d(s))),t.target.classList.add("categories__btn--active"),a(s,C(e,s=1))}});R.addEventListener("submit",t=>{t.preventDefault();const e=document.querySelector(".products");e.innerHTML="";const o=document.querySelector(".search-form__input").value.trim();a(s,q(o,s)),_(),l=null});A.addEventListener("click",()=>{const t=document.querySelector(".search-form__input");t.value="";const e=document.querySelector(".products");e.innerHTML="",a(s,d(s)),_(),l=null});M.addEventListener("click",async t=>{const e=t.target.closest(".products__item");if(!e)return;const o=e.dataset.id;i=o;try{const c=await $(o);x(c),b.classList.add("modal--is-open");const r=document.querySelector('[data-btn="wishlist"]'),n=document.querySelector('[data-btn="cart"]');r&&L("wishlist",i)?(r.textContent="Remove from Wishlist",r.classList.remove("modal-product__btn--wishlist")):(r.textContent="Add to Wishlist",r.classList.add("modal-product__btn--wishlist")),n&&L("cart",i)?(n.textContent="Remove from Cart",n.classList.remove("modal-product__btn--cart")):(n.textContent="Add to Cart",n.classList.add("modal-product__btn--cart"))}catch(c){console.error("Ошибка при получении продукта:",c)}});P.addEventListener("click",()=>{b.classList.remove("modal--is-open")});B.addEventListener("click",t=>{t.target.textContent.trim()==="Add to Wishlist"?(t.target.textContent="Remove from Wishlist",t.target.classList.remove("modal-product__btn--wishlist"),h("wishlist",i),console.log(g("wishlist"))):t.target.textContent.trim()==="Remove from Wishlist"?(t.target.textContent="Add to Wishlist",t.target.classList.add("modal-product__btn--wishlist"),y("wishlist",i),console.log(g("wishlist"))):t.target.textContent.trim()==="Add to Cart"?(t.target.textContent="Remove from Cart",t.target.classList.remove("modal-product__btn--cart"),h("cart",i),console.log(g("cart"))):t.target.textContent.trim()==="Remove from Cart"&&(t.target.textContent="Add to Cart",t.target.classList.add("modal-product__btn--cart"),y("cart",i),console.log(g("cart")))});
//# sourceMappingURL=index.js.map
