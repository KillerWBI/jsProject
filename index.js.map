{"version":3,"file":"index.js","sources":["../src/home.js"],"sourcesContent":["import { CategoryList, getIDProduct, getProducts, getProductSearch, getProductsFromCategory } from './js/products-api.js';\nimport { CreateCategoryList, CreateHomeLoadProducts, CreateProductModal, removeFocusCategory } from './js/render-function';\nimport { AddLocalStorageSet, countLocalStorage, removeFromStorage, shearId } from './js/storage.js';\nlet page = 1;\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst categoriesContainer = document.querySelector('.categories');\nlet activeCategory = null;\nconst form = document.querySelector('.search-form');\nconst cleaninput = document.querySelector('.search-form__btn-clear');\nconst modal = document.querySelector('.modal');\nconst Btnlike = document.querySelector('.modal-product__btn');\nconst BtnContainerLike = document.querySelector('.modal-product__actions');\nconst product = document.querySelector('.products');\nconst modalCloseBtn = document.querySelector('.modal__close-btn');\nlet IdProduct = '';\naddEventListener('DOMContentLoaded', () => {\n  CreateHomeLoadProducts(page, getProducts(page));\n  CreateCategoryList(CategoryList());\n  countLocalStorage('wishlist');\n  countLocalStorage('cart');\n});\n\n loadMoreBtn.addEventListener('click', () => {\n    page++;\n    if(activeCategory === null) {\n      CreateHomeLoadProducts(page, getProducts(page));\n    } else {\n      CreateHomeLoadProducts(page, getProductsFromCategory(activeCategory, page));\n    }\n  });\n\n// Обробник події для кнопок категорій\n  categoriesContainer.addEventListener('click',  (event) => {\n    removeFocusCategory();\n  if (event.target.classList.contains('categories__btn')) {\n    const category = event.target.textContent;\n    activeCategory = category; // Зберігаємо активну категорію\n    page = 1; // Сброс страницы\n    const productsContainer = document.querySelector('.products');\n    productsContainer.innerHTML = ''; // Очистка\n\n    if (event.target.classList.contains('categories__btn--active')) {\n      event.target.classList.remove('categories__btn--active'); // Видаляємо клас активної категорії\n      activeCategory = null; // Скидаємо активну категорію\n      CreateHomeLoadProducts(page, getProducts(page)); // Завантажуємо всі продукти\n      return;\n    }\n\n    if (event.target.textContent === 'ALL') {\n      activeCategory = null; //\n      CreateHomeLoadProducts(page, getProducts(page));\n    }\n    event.target.classList.add('categories__btn--active'); // Додаємо клас активної категорії\n\n    CreateHomeLoadProducts(page, getProductsFromCategory(category  ,page = 1));\n  }\n});\n\n\nform.addEventListener('submit', (event) => {\n  event.preventDefault();\n  const productsContainer = document.querySelector('.products');\n  productsContainer.innerHTML = ''; // Очистка\n  const searchQuery = document.querySelector('.search-form__input').value.trim();\n  CreateHomeLoadProducts(page, getProductSearch(searchQuery, page));\n  removeFocusCategory();\n  activeCategory = null;\n});\ncleaninput.addEventListener('click', () => {\n  const input = document.querySelector('.search-form__input');\n  input.value = '';\n  const productsContainer = document.querySelector('.products');\n  productsContainer.innerHTML = ''; // Очистка\n  CreateHomeLoadProducts(page, getProducts(page));\n  removeFocusCategory();\n  activeCategory = null;\n});\n\n\n\nproduct.addEventListener('click', async (event) => {\n  const item = event.target.closest('.products__item');\n  if (!item) return;\n  const productId = item.dataset.id;\n  IdProduct = productId; // Сохраняем ID продукта для дальнейшего использования\n\n  try {\n    const productData = await getIDProduct(productId);\n    CreateProductModal(productData); // вставляем HTML\n    modal.classList.add('modal--is-open');\n\n    // Получаем кнопки после вставки HTML\n    const wishlistBtn = document.querySelector('[data-btn=\"wishlist\"]');\n    const cartBtn = document.querySelector('[data-btn=\"cart\"]');\n\n    if (wishlistBtn && shearId('wishlist', IdProduct)) {\n      wishlistBtn.textContent = 'Remove from Wishlist';\n      wishlistBtn.classList.remove('modal-product__btn--wishlist');\n    }else {\n      wishlistBtn.textContent = 'Add to Wishlist';\n      wishlistBtn.classList.add('modal-product__btn--wishlist');\n    }\n\n    if (cartBtn && shearId('cart', IdProduct)) {\n      cartBtn.textContent = 'Remove from Cart';\n      cartBtn.classList.remove('modal-product__btn--cart');\n    } else {\n      cartBtn.textContent = 'Add to Cart';\n      cartBtn.classList.add('modal-product__btn--cart');\n    }\n\n  } catch (error) {\n    console.error('Ошибка при получении продукта:', error);\n  }\n});\n\nmodalCloseBtn.addEventListener('click', () => {\n  modal.classList.remove('modal--is-open');\n});\n\nBtnContainerLike.addEventListener('click', (event) => {\n\n  if (event.target.textContent.trim() === 'Add to Wishlist') {\n    event.target.textContent = 'Remove from Wishlist';\n    event.target.classList.remove('modal-product__btn--wishlist');\n    AddLocalStorageSet('wishlist', IdProduct);\n\n  } else if(event.target.textContent.trim() === 'Remove from Wishlist') {\n    event.target.textContent = 'Add to Wishlist';\n    event.target.classList.add('modal-product__btn--wishlist');\n    removeFromStorage('wishlist', IdProduct)\n\n  } else if(event.target.textContent.trim() === 'Add to Cart') {\n    event.target.textContent = 'Remove from Cart';\n    event.target.classList.remove('modal-product__btn--cart');\n    AddLocalStorageSet('cart', IdProduct);\n\n  } else if(event.target.textContent.trim() === 'Remove from Cart') {\n    event.target.textContent = 'Add to Cart';\n    event.target.classList.add('modal-product__btn--cart');\n    removeFromStorage('cart', IdProduct)\n\n  }\n\n\n});\n\n"],"names":["page","loadMoreBtn","categoriesContainer","activeCategory","form","cleaninput","modal","BtnContainerLike","product","modalCloseBtn","IdProduct","CreateHomeLoadProducts","getProducts","CreateCategoryList","CategoryList","countLocalStorage","getProductsFromCategory","event","removeFocusCategory","category","productsContainer","searchQuery","getProductSearch","input","item","productId","productData","getIDProduct","CreateProductModal","wishlistBtn","cartBtn","shearId","error","AddLocalStorageSet","removeFromStorage"],"mappings":"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"}